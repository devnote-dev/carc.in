args = [
  "<%= path %>",
  "-p",
  "-d", "/dev/null:rw,/dev/random:r,/dev/urandom:r",
  "-u", "<%= name %>",
  <% if memory %>
    "-m", "<%= memory %>",
  <% end %>
  "-t", "<%= timeout %>",
  "-T", "<%= max_tasks %>",
  "-S", "<%= whitelist %>",
  <% if learn_mode %>
    "-l",
  <% end %>
  "--",
  "<%= binary %>"
]
args += ARGV
process = Process.new "/usr/bin/playpen", args, input: true, output: true, error: true
exit process.wait.exit_code
